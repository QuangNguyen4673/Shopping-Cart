{"version":3,"sources":["firebase.js","context/reducer.js","context/ShopContext.js","components/MainNav.js","components/ProductCard.js","pages/Shop.js","components/PaymentForm.js","pages/Cart.js","pages/SignUp.js","pages/LogIn.js","components/PurchaseHistory.js","App.js","index.js"],"names":["db","initializeApp","apiKey","process","authDomain","projectId","storageBucket","messagingSenderId","appId","getFirestore","ADD_PRODUCT","REMOVE_PRODUCT","UPDATE_PRODUCT","REMOVE_WHOLE_CART","findItemInCart","cart","item","findIndex","t","id","shopReducer","state","action","type","index","payload","updatedState","updatedItem","quantity","push","addProductToCart","splice","removeProductFromCart","newQuantity","updateProductFromCart","Context","React","createContext","useShopContext","useContext","ShopContext","children","useReducer","dispatch","useState","product","setProduct","currentUser","setCurrentUser","loading","setLoading","auth","getAuth","history","useHistory","useEffect","axios","get","then","result","data","onAuthStateChanged","user","removeWholeCart","value","addProduct","removeProduct","updateProduct","signup","email","password","createUserWithEmailAndPassword","alert","catch","login","signInWithEmailAndPassword","logOut","signOut","console","log","error","message","checkOut","checkOutInfo","a","addDoc","collection","Provider","MainNav","props","isDropdownOpen","setIsDropdownOpen","cartLength","length","className","to","onClick","ProductCard","image","price","title","description","src","alt","toFixed","onChange","e","newValue","target","updateHandler","Shop","map","PaymentForm","submitHandler","total","fullName","setFullName","address","setAddress","phoneNumber","setPhoneNumber","userEmail","onSubmit","required","readOnly","Cart","isItemInCart","reduce","acc","paymentInfo","preventDefault","i","modifiedCart","rating","userId","uid","created","serverTimestamp","SignUp","setEmail","setPassword","passwordConfirm","setPasswordConfirm","LogIn","PurchaseHistory","receipts","setReceipts","q","query","where","orderBy","getDocs","querySnapshot","forEach","doc","getData","allCarts","AllCarts","singleCart","receipt","SingleBuy","purchaseTime","Date","seconds","toLocaleString","SingleItem","App","clickedElm","classList","contains","clickHandler","path","exact","component","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.3d27b807.chunk.js","sourcesContent":["import { initializeApp } from \"firebase/app\";\r\nimport { getFirestore } from \"firebase/firestore\";\r\n\r\nconst firebaseConfig = {\r\n  apiKey: process.env.REACT_APP_FIREBASE_API_KEY,\r\n  authDomain: process.env.REACT_APP_FIREBASE_AUTH_DOMAIN,\r\n  projectId: process.env.REACT_APP_FIREBASE_PROJECT_ID,\r\n  storageBucket: process.env.REACT_APP_FIREBASE_STORAGE_BUCKET,\r\n  messagingSenderId: process.env.REACT_APP_FIREBASE_MESSAGING_SENDER_ID,\r\n  appId: process.env.REACT_APP_FIREBASE_APP_ID,\r\n};\r\nconst app = initializeApp(firebaseConfig);\r\n\r\nexport const db = getFirestore();\r\n\r\nexport default app;\r\n","export const ADD_PRODUCT = \"ADD_PRODUCT\";\r\nexport const REMOVE_PRODUCT = \"REMOVE_PRODUCT\";\r\nexport const UPDATE_PRODUCT = \"UPDATE_PRODUCT\";\r\nexport const REMOVE_WHOLE_CART = \"REMOVE_WHOLE_CART\";\r\n\r\nconst findItemInCart = (cart, item) => cart.findIndex((t) => t.id === item.id);\r\n\r\nconst addProductToCart = (state, action) => {\r\n  const index = findItemInCart(state, action.payload);\r\n  let updatedState = [...state];\r\n  let updatedItem = state[index];\r\n  if (index > -1) {\r\n    updatedItem = { ...updatedItem, quantity: updatedItem.quantity * 1 + 1 };\r\n    updatedState[index] = updatedItem;\r\n  } else {\r\n    updatedState.push(action.payload);\r\n  }\r\n  return updatedState;\r\n};\r\n\r\nconst removeProductFromCart = (state, action) => {\r\n  const index = findItemInCart(state, action.payload);\r\n  let updatedState = [...state];\r\n  updatedState.splice(index, 1);\r\n  return updatedState;\r\n};\r\nconst removeWholeCart = () => [];\r\n\r\nconst updateProductFromCart = (state, action) => {\r\n  const index = findItemInCart(state, action.payload);\r\n  let updatedState = [...state];\r\n  let updatedItem = state[index];\r\n  const newQuantity = action.payload.quantity;\r\n  updatedItem = {\r\n    ...updatedItem,\r\n    quantity: newQuantity,\r\n  };\r\n  updatedState[index] = updatedItem;\r\n  return updatedState;\r\n};\r\n\r\nexport const shopReducer = (state, action) => {\r\n  switch (action.type) {\r\n    case ADD_PRODUCT:\r\n      return addProductToCart(state, action);\r\n    case REMOVE_PRODUCT:\r\n      return removeProductFromCart(state, action);\r\n    case REMOVE_WHOLE_CART:\r\n      return removeWholeCart();\r\n    case UPDATE_PRODUCT:\r\n      return updateProductFromCart(state, action);\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import React, { useContext, useReducer, useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport {\r\n  createUserWithEmailAndPassword,\r\n  signInWithEmailAndPassword,\r\n  onAuthStateChanged,\r\n  signOut,\r\n  getAuth,\r\n} from \"firebase/auth\";\r\nimport { db } from \"../firebase\";\r\nimport { collection, addDoc } from \"firebase/firestore\";\r\n\r\nimport {\r\n  shopReducer,\r\n  UPDATE_PRODUCT,\r\n  ADD_PRODUCT,\r\n  REMOVE_PRODUCT,\r\n  REMOVE_WHOLE_CART,\r\n} from \"./reducer\";\r\nimport { useHistory } from \"react-router\";\r\n\r\nconst Context = React.createContext();\r\nexport const useShopContext = () => useContext(Context);\r\n\r\nexport default function ShopContext({ children }) {\r\n  const [cart, dispatch] = useReducer(shopReducer, []);\r\n  const [product, setProduct] = useState([]);\r\n  const [currentUser, setCurrentUser] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  const auth = getAuth();\r\n  const history = useHistory();\r\n  useEffect(() => {\r\n    axios.get(\"https://fakestoreapi.com/products\").then((result) => {\r\n      const data = result.data;\r\n      setProduct(data);\r\n    });\r\n  }, []);\r\n  useEffect(() => {\r\n    const unsub = onAuthStateChanged(auth, (user) => {\r\n      setCurrentUser(user);\r\n      removeWholeCart();\r\n      setLoading(false);\r\n    });\r\n    return unsub;\r\n  }, [auth]);\r\n\r\n  const addProduct = (item) => {\r\n    dispatch({ type: ADD_PRODUCT, payload: { ...item, quantity: 1 } });\r\n  };\r\n  const removeProduct = (item) => {\r\n    dispatch({ type: REMOVE_PRODUCT, payload: item });\r\n  };\r\n  const removeWholeCart = () => {\r\n    dispatch({ type: REMOVE_WHOLE_CART });\r\n  };\r\n  const updateProduct = (item) => {\r\n    dispatch({ type: UPDATE_PRODUCT, payload: item });\r\n  };\r\n\r\n  const signup = (email, password) => {\r\n    return createUserWithEmailAndPassword(auth, email, password)\r\n      .then(() => {\r\n        history.push(\"/Shopping-Cart\");\r\n        return alert(\"Registration successful!\");\r\n      })\r\n      .catch(() => {\r\n        return alert(\"Registration fail! Please try again\");\r\n      });\r\n  };\r\n\r\n  const login = (email, password) => {\r\n    return signInWithEmailAndPassword(auth, email, password)\r\n      .then(() => {\r\n        history.push(\"/Shopping-Cart\");\r\n        return alert(\"Login successful!\");\r\n      })\r\n      .catch(() => {\r\n        return alert(\"Your email or password is not correct!\");\r\n      });\r\n  };\r\n  const logOut = () => {\r\n    return signOut(auth)\r\n      .then(() => {\r\n        return console.log(\"Sign out\");\r\n      })\r\n      .catch((error) => {\r\n        return console.log(error.message);\r\n      });\r\n  };\r\n\r\n  const checkOut = async (checkOutInfo) => {\r\n    try {\r\n      const docRef = await addDoc(collection(db, \"PurchaseInfo\"), checkOutInfo);\r\n      if (docRef.id) return alert(\"Your purchase was successful!\");\r\n    } catch (err) {\r\n      console.error(\"Error adding document: \", err);\r\n    }\r\n  };\r\n\r\n  const value = {\r\n    cart,\r\n    product,\r\n    currentUser,\r\n    addProduct,\r\n    removeProduct,\r\n    updateProduct,\r\n    signup,\r\n    login,\r\n    logOut,\r\n    checkOut,\r\n  };\r\n  return (\r\n    <Context.Provider value={value}>{!loading && children}</Context.Provider>\r\n  );\r\n}\r\n","import { Link } from \"react-router-dom\";\r\nimport { useShopContext } from \"../context/ShopContext\";\r\n\r\nexport default function MainNav(props) {\r\n  const { isDropdownOpen, setIsDropdownOpen } = props;\r\n  const { cart, currentUser, logOut } = useShopContext();\r\n\r\n  const cartLength = cart.length > 0 ? `(${cart.length})` : \"\";\r\n  return (\r\n    <div className=\"navbar\">\r\n      <nav className=\"flex-wrapper-1\">\r\n        <Link className=\"nav-link\" to=\"/Shopping-Cart\">\r\n          Shop\r\n        </Link>\r\n\r\n        <Link className=\"nav-link\" to=\"/Shopping-Cart/cart\">\r\n          Cart {cartLength}\r\n        </Link>\r\n\r\n        {currentUser ? (\r\n          <div className=\"dropdown\">\r\n            <div\r\n              className=\"nav-link dd\"\r\n              to=\"/login\"\r\n              onClick={() => setIsDropdownOpen(!isDropdownOpen)}\r\n            >\r\n              {currentUser.email}\r\n            </div>\r\n            {isDropdownOpen && (\r\n              <div className=\"dropdown-menu\">\r\n                <Link\r\n                  className=\"nav-link dd\"\r\n                  to=\"/Shopping-Cart/purchasehistory\"\r\n                >\r\n                  Purchase History\r\n                </Link>\r\n                <Link\r\n                  className=\"nav-link dd\"\r\n                  to=\"/Shopping-Cart/login\"\r\n                  onClick={() => {\r\n                    logOut();\r\n                    setIsDropdownOpen(false);\r\n                  }}\r\n                >\r\n                  Log out\r\n                </Link>\r\n              </div>\r\n            )}\r\n          </div>\r\n        ) : (\r\n          <div className=\"flex-wrapper-2\">\r\n            <Link className=\"nav-link\" to=\"/Shopping-Cart/signup\">\r\n              Sign up\r\n            </Link>\r\n            /\r\n            <Link className=\"nav-link\" to=\"/Shopping-Cart/login\">\r\n              Login\r\n            </Link>\r\n          </div>\r\n        )}\r\n      </nav>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\n\r\nexport default function ProductCard({\r\n  item,\r\n  addProduct,\r\n  removeProduct,\r\n  updateProduct,\r\n}) {\r\n  const { image, price, title, description, quantity } = item;\r\n\r\n  const updateHandler = (e) => {\r\n    const newValue = e.target.value;\r\n    if (newValue > 999) return;\r\n    if (newValue === \"\" || newValue > 0) {\r\n      updateProduct({ ...item, quantity: e.target.value });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"product-card\">\r\n      <img src={image} alt=\"product\" />\r\n      <div className=\"product-info\">\r\n        <h3 className=\"line-clamp-2\">{title}</h3>\r\n        {addProduct && (\r\n          <p className=\"description line-clamp-3\">{description}</p>\r\n        )}\r\n\r\n        <div className=\"price-and-quantity\">\r\n          {addProduct ? (\r\n            <strong className=\"price\">{price}$</strong>\r\n          ) : (\r\n            <strong className=\"price\">{(price * quantity).toFixed(2)}$</strong>\r\n          )}\r\n\r\n          {!addProduct && (\r\n            <input\r\n              className=\"quantity\"\r\n              type=\"number\"\r\n              onChange={(e) => updateHandler(e)}\r\n              value={quantity}\r\n            />\r\n          )}\r\n        </div>\r\n\r\n        {addProduct && (\r\n          <button type=\"button\" onClick={() => addProduct(item)}>\r\n            Add to cart\r\n          </button>\r\n        )}\r\n        {!addProduct && (\r\n          <button type=\"button\" onClick={() => removeProduct(item)}>\r\n            Remove\r\n          </button>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import ProductCard from \"../components/ProductCard\";\r\nimport { useShopContext } from \"../context/ShopContext\";\r\n\r\nexport default function Shop() {\r\n  const { product, addProduct } = useShopContext();\r\n  return (\r\n    <div className=\"container\">\r\n      <div className=\"shop\">\r\n        <h2 className=\"header\">Shop</h2>\r\n        <div className=\"shop-row\">\r\n          {product.map((item) => {\r\n            return (\r\n              <ProductCard key={item.id} item={item} addProduct={addProduct} />\r\n            );\r\n          })}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState } from \"react\";\r\nimport { useShopContext } from \"../context/ShopContext\";\r\n\r\nexport default function PaymentForm({ submitHandler, total }) {\r\n  const [fullName, setFullName] = useState(\"\");\r\n  const [address, setAddress] = useState(\"\");\r\n  const [phoneNumber, setPhoneNumber] = useState(\"\");\r\n  const { currentUser } = useShopContext();\r\n  if (!currentUser)\r\n    return (\r\n      <div className=\"alert-info\">Please login your account to purchase</div>\r\n    );\r\n  const userEmail = currentUser.email;\r\n  return (\r\n    <div className=\"payment-form\">\r\n      <h3>Billing Address</h3>\r\n      <form\r\n        onSubmit={(e) =>\r\n          submitHandler(e, { fullName, userEmail, address, phoneNumber, total })\r\n        }\r\n      >\r\n        <div>\r\n          <h4>Full Name</h4>\r\n          <input\r\n            type=\"text\"\r\n            required\r\n            value={fullName}\r\n            onChange={(e) => setFullName(e.target.value)}\r\n          />\r\n        </div>\r\n        <div>\r\n          <h4>Email</h4>\r\n          <input type=\"text\" readOnly value={userEmail} />\r\n        </div>\r\n        <div>\r\n          <h4>Address</h4>\r\n          <input\r\n            type=\"text\"\r\n            required\r\n            value={address}\r\n            onChange={(e) => setAddress(e.target.value)}\r\n          />\r\n        </div>\r\n        <div>\r\n          <h4>Phone Number</h4>\r\n          <input\r\n            type=\"number\"\r\n            required\r\n            value={phoneNumber}\r\n            onChange={(e) => setPhoneNumber(e.target.value)}\r\n          />\r\n        </div>\r\n        <h4>Total: {total} $</h4>\r\n        <button type=\"submit\">Purchase</button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n","import { Link } from \"react-router-dom\";\r\nimport PaymentForm from \"../components/PaymentForm\";\r\nimport ProductCard from \"../components/ProductCard\";\r\nimport { useShopContext } from \"../context/ShopContext\";\r\nimport { serverTimestamp } from \"firebase/firestore\";\r\nexport default function Cart() {\r\n  const { cart, removeProduct, updateProduct, checkOut, currentUser } =\r\n    useShopContext();\r\n\r\n  const isItemInCart = cart.length > 0;\r\n  const total = cart\r\n    .reduce((acc, item) => {\r\n      return acc + item.price * item.quantity;\r\n    }, 0)\r\n    .toFixed(2);\r\n\r\n  const submitHandler = (e, paymentInfo) => {\r\n    console.log(e);\r\n    e.preventDefault();\r\n\r\n    for (let i = 0; i < cart.length; i++) {\r\n      if (!cart[i].quantity) {\r\n        return alert(\"please dont leave quantity blank\");\r\n      }\r\n    }\r\n    const modifiedCart = cart.map((item) => {\r\n      delete item.description;\r\n      delete item.rating;\r\n      return item;\r\n    });\r\n    const userId = currentUser.uid;\r\n    checkOut({\r\n      ...paymentInfo,\r\n      userId,\r\n      cart: modifiedCart,\r\n      created: serverTimestamp(),\r\n    });\r\n  };\r\n  if (!isItemInCart) {\r\n    return (\r\n      <div className=\"alert-info alert-floating\">\r\n        Your cart has no item. <Link to=\"/Shopping-Cart\">Shop now</Link>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <div className=\"cart\">\r\n        <h2 className=\"header\">Cart</h2>\r\n        <div className=\"flex-wrapper\">\r\n          <div className=\"shopping-cart\">\r\n            {cart.map((item) => {\r\n              return (\r\n                <ProductCard\r\n                  key={item.id}\r\n                  item={item}\r\n                  removeProduct={removeProduct}\r\n                  updateProduct={updateProduct}\r\n                />\r\n              );\r\n            })}\r\n          </div>\r\n          <PaymentForm submitHandler={submitHandler} total={total} />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { useShopContext } from \"../context/ShopContext\";\r\nexport default function SignUp() {\r\n  const { signup } = useShopContext();\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [passwordConfirm, setPasswordConfirm] = useState(\"\");\r\n  const submitHandler = (e) => {\r\n    e.preventDefault();\r\n    if (password !== passwordConfirm) return alert(\"passwords do not match\");\r\n    signup(email, password);\r\n  };\r\n  return (\r\n    <div className=\"container\">\r\n      <div className=\"sign-up\">\r\n        <h2>Sign up</h2>\r\n        <form onSubmit={submitHandler}>\r\n          <div>\r\n            <h4>Email</h4>\r\n            <input\r\n              type=\"email\"\r\n              required\r\n              value={email}\r\n              onChange={(e) => setEmail(e.target.value)}\r\n            />\r\n          </div>\r\n          <div>\r\n            <h4>Password</h4>\r\n            <input\r\n              type=\"password\"\r\n              required\r\n              value={password}\r\n              onChange={(e) => setPassword(e.target.value)}\r\n            />\r\n          </div>\r\n          <div>\r\n            <h4>Password Confirm</h4>\r\n            <input\r\n              type=\"password\"\r\n              required\r\n              value={passwordConfirm}\r\n              onChange={(e) => setPasswordConfirm(e.target.value)}\r\n            />\r\n          </div>\r\n          <small\r\n            className=\"autofill\"\r\n            onClick={() => {\r\n              setPassword(\"123456\");\r\n              setPasswordConfirm(\"123456\");\r\n            }}\r\n          >\r\n            Autofill password with \"123456\"\r\n          </small>\r\n          <button type=\"submit\">Submit</button>\r\n          <div>\r\n            Already have an account?{\" \"}\r\n            <Link to=\"/Shopping-Cart/login\">Log in</Link>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import { useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { useShopContext } from \"../context/ShopContext\";\r\n\r\nexport default function LogIn() {\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const { login } = useShopContext();\r\n  const submitHandler = (e) => {\r\n    e.preventDefault();\r\n    login(email, password);\r\n    console.log(\"submit\");\r\n  };\r\n  return (\r\n    <div className=\"container\">\r\n      <div className=\"login\">\r\n        <h2>Login</h2>\r\n        <form onSubmit={submitHandler}>\r\n          <div>\r\n            <h4>Email</h4>\r\n            <input\r\n              type=\"email\"\r\n              required\r\n              value={email}\r\n              onChange={(e) => setEmail(e.target.value)}\r\n            />\r\n          </div>\r\n          <div>\r\n            <h4>Password</h4>\r\n            <input\r\n              type=\"password\"\r\n              required\r\n              value={password}\r\n              onChange={(e) => setPassword(e.target.value)}\r\n            />\r\n          </div>\r\n          <button type=\"submit\">Submit</button>\r\n          <div>\r\n            Need an account? <Link to=\"/Shopping-Cart/signup\">Sign up</Link>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { collection, query, where, getDocs, orderBy } from \"firebase/firestore\";\r\nimport { db } from \"../firebase\";\r\nimport { useShopContext } from \"../context/ShopContext\";\r\n\r\nexport default function PurchaseHistory() {\r\n  const [receipts, setReceipts] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const { currentUser } = useShopContext();\r\n\r\n  useEffect(() => {\r\n    const getData = async () => {\r\n      const q = query(\r\n        collection(db, \"PurchaseInfo\"),\r\n        where(\"userId\", \"==\", currentUser.uid),\r\n        orderBy(\"created\", \"desc\")\r\n      );\r\n      const querySnapshot = await getDocs(q);\r\n      const data = [];\r\n      querySnapshot.forEach((doc) => {\r\n        data.push(doc.data());\r\n      });\r\n      setReceipts(data);\r\n      setLoading(false);\r\n    };\r\n    getData();\r\n  }, [currentUser.uid]);\r\n  const allCarts = receipts.map((item) => item.cart);\r\n\r\n  if (loading) {\r\n    return <div className=\"alert-info alert-floating\">Loading ...</div>;\r\n  } else if (receipts.length === 0) {\r\n    return (\r\n      <div className=\"alert-danger alert-floating\">\r\n        You haven't bought anything yet ...\r\n      </div>\r\n    );\r\n  }\r\n  return (\r\n    <div className=\"container\">\r\n      <div className=\"purchase-history\">\r\n        <h2 className=\"header\">Purchase History</h2>\r\n        <AllCarts allCarts={allCarts} receipts={receipts} />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\nconst AllCarts = ({ allCarts, receipts }) => {\r\n  return allCarts.map((singleCart, index) => {\r\n    return (\r\n      <SingleBuy\r\n        key={index}\r\n        singleCart={singleCart}\r\n        receipt={receipts[index]}\r\n      />\r\n    );\r\n  });\r\n};\r\n\r\nconst SingleBuy = ({ singleCart, receipt }) => {\r\n  const { total, created } = receipt;\r\n  const purchaseTime = new Date(created.seconds * 1000).toLocaleString();\r\n\r\n  return (\r\n    <div className=\"single-buy\">\r\n      {singleCart.map((item, index) => {\r\n        return <SingleItem key={index} item={item} />;\r\n      })}\r\n      <div className=\"purchase-time\">\r\n        <strong>Purchase at:</strong>\r\n        {purchaseTime}\r\n      </div>\r\n      <h4>Total: {total}$</h4>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst SingleItem = ({ item }) => {\r\n  const { title, image, price, quantity } = item;\r\n  return (\r\n    <div className=\"single-item\">\r\n      <h4>{title}</h4>\r\n      <div className=\"img-and-price\">\r\n        <div className=\"img-wrapper\">\r\n          <img src={image} alt=\"\\#\" />\r\n        </div>\r\n        <strong className=\"price\">{price}$</strong>\r\n      </div>\r\n      <h4 className=\"quantity\">Quantity: {quantity}</h4>\r\n    </div>\r\n  );\r\n};\r\n","import \"./assets/css/style.css\";\r\nimport { useState } from \"react\";\r\nimport MainNav from \"./components/MainNav\";\r\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\r\nimport Shop from \"./pages/Shop\";\r\nimport Cart from \"./pages/Cart\";\r\nimport ShopContext from \"./context/ShopContext\";\r\nimport SignUp from \"./pages/SignUp\";\r\nimport LogIn from \"./pages/LogIn\";\r\nimport PurchaseHistory from \"./components/PurchaseHistory\";\r\nfunction App() {\r\n  const [isDropdownOpen, setIsDropdownOpen] = useState(false);\r\n  const clickHandler = (e) => {\r\n    const clickedElm = e.target.classList;\r\n    console.log(e.target.value);\r\n    if (!clickedElm.contains(\"dd\")) {\r\n      setIsDropdownOpen(false);\r\n    }\r\n  };\r\n  return (\r\n    <div className=\"app\" onClick={(e) => clickHandler(e)}>\r\n      <Router>\r\n        <ShopContext>\r\n          <MainNav\r\n            isDropdownOpen={isDropdownOpen}\r\n            setIsDropdownOpen={setIsDropdownOpen}\r\n          />\r\n          <Switch>\r\n            <Route path=\"/Shopping-Cart\" exact component={Shop} />\r\n            <Route path=\"/Shopping-Cart/cart\" component={Cart} />\r\n            <Route path=\"/Shopping-Cart/signup\" component={SignUp} />\r\n            <Route path=\"/Shopping-Cart/login\" component={LogIn} />\r\n            <Route\r\n              path=\"/Shopping-Cart/purchasehistory\"\r\n              component={PurchaseHistory}\r\n            />\r\n          </Switch>\r\n        </ShopContext>\r\n      </Router>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport App from \"./App\";\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n);\r\n"],"sourceRoot":""}